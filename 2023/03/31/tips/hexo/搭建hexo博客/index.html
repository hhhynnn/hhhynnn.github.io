<!DOCTYPE html><html lang="zh-Hans" theme-mode="dark"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>搭建hexo博客 | Zenith</title><script>var config = {"root":"/","search":{"preload":false,"activeHolder":"键入以继续","blurHolder":"数据检索","noResult":"无 $0 相关数据"},"code":{"codeInfo":"$0 - 共 $1 行","copy":"复制","copyFinish":"复制成功","expand":"展开"}}</script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script src="//unpkg.com/mermaid@9.2.2/dist/mermaid.min.js"></script><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lightgallery.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-zoom.css"><link type="text/css" rel="stylesheet" href="//unpkg.com/lightgallery@2.7.1/css/lg-thumbnail.css"><link rel="stylesheet" href="/css/arknights.css"><script>if (window.localStorage.getItem('theme-mode') === 'light') document.documentElement.setAttribute('theme-mode', 'light')
if (window.localStorage.getItem('theme-mode') === 'dark') document.documentElement.setAttribute('theme-mode', 'dark')</script><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 5.4.2"><link rel="alternate" href="/atom.xml" title="Zenith" type="application/atom+xml">
</head><body><div class="loading" style="opacity: 0"><div class="loadingBar left"></div><div class="loadingBar right"></div></div><main><header class="closed"><nav><div class="navBtn hide"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><div class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></div><div class="navItem" id="search-holder"></div><div class="search-popup"><div id="search-result"></div></div><ol class="navContent"><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">Home</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">About</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">Archives</span></a></li></ol></nav></header><article><div id="post-bg"><div id="post-title"><h1>搭建hexo博客</h1><div id="post-info"><span>文章发布时间: <div class="control"><time datetime="2023-03-31T14:12:57.000Z" id="date"> 2023-03-31</time></div></span><br><span>最后更新时间: <div class="control"><time datetime="2023-04-02T01:26:38.478Z" id="updated"> 2023-04-02</time></div></span></div></div><hr><div id="post-content"><p>个人配置 hexo 的记录，参考了 B 站的教程。</p>
<span id="more"></span>


<p>参考教程：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Yb411a7ty?from=search&seid=17488073384275823610">手把手教你从 0 开始搭建自己的个人博客 |无坑版视频教程| hexo</a></p>
<h1 id="Hello-world"><a href="#Hello-world" class="headerlink" title="Hello, world"></a>Hello, world</h1><p>先让博客跑起来：下载 hexo，使用默认主题在本地运行</p>
<h2 id="一、-hexo-环境配置"><a href="#一、-hexo-环境配置" class="headerlink" title="一、 hexo 环境配置"></a>一、 hexo 环境配置</h2><p>hexo 要用到 node.js，先安装 node.js </p>
<h3 id="1-安装-node-js"><a href="#1-安装-node-js" class="headerlink" title="1. 安装 node.js"></a>1. 安装 node.js</h3><p>windows 下自己找个教程安装 nodejs</p>
<p>下载地址：<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/">node.js 官方下载</a></p>
<p>安装说明：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/tanghaorong/p/14652357.html">nodeJS 的安装与配置</a></p>
<h3 id="2-安装-hexo"><a href="#2-安装-hexo" class="headerlink" title="2. 安装 hexo"></a>2. 安装 hexo</h3><p>敲命令安装 hexo，这个命令在 hexo 官网上有介绍，具体可以查看<a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">hexo 官网</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$  npm install -g hexo-cli<br></code></pre></td></tr></table></figure>

<p><code>npm install -g hexo-cli</code> 是在命令行中使用 npm（Node Package Manager）来全局安装 Hexo 博客生成器的命令。</p>
<p>具体来说，<code>npm install</code> 是安装 npm 包的命令，<code>-g</code> 表示全局安装，<code>hexo-cli</code> 是要安装的包名。在安装 hexo-cli 包后，你可以在任何地方使用命令行输入 <code>hexo</code> 命令，使用 Hexo 博客生成器的相关功能，例如创建新文章、生成静态页面等。</p>
<p>需要注意的是，使用 <code>npm install -g</code> 安装的包是全局可用的，而非针对某个项目的本地安装。因此，在安装时需要以管理员权限运行命令，以确保权限足够。此外，如果你在使用 Hexo 时遇到了问题，可以尝试使用 <code>npm uninstall -g hexo-cli</code> 命令卸载全局安装的 Hexo，并重新安装本地版本。</p>
<h2 id="二、创建本地博客"><a href="#二、创建本地博客" class="headerlink" title="二、创建本地博客"></a>二、创建本地博客</h2><p>用最少的步骤让 hexo 博客运行起来，下面进行介绍</p>
<h3 id="1-初始化一个-hexo-目录"><a href="#1-初始化一个-hexo-目录" class="headerlink" title="1. 初始化一个 hexo 目录"></a>1. 初始化一个 hexo 目录</h3><p>下面这个命令会创建一个新的目录 ZenithBlog，其中包括 Hexo 博客生成器的基本目录结构和默认配置文件。在这个目录下，你可以通过编辑 Markdown 文件来撰写博客文章，并通过 Hexo 提供的命令来生成静态网站文件和发布到服务器等操作。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$  hexo init ZenithBlog<br></code></pre></td></tr></table></figure>

<p>PS.执行这个命令前需要保证系统已经安装了 Node.js 和 npm</p>
<h3 id="2-在目录中安装必要组件"><a href="#2-在目录中安装必要组件" class="headerlink" title="2. 在目录中安装必要组件"></a>2. 在目录中安装必要组件</h3><p>进入<code>ZenithBlog</code>目录执行 <code>npm install</code> 命令，这会在当前项目目录中查找 <code>package.json</code> 文件，并根据其中列出的依赖包列表安装所需的包。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ <span class="hljs-built_in">cd</span> ZenithBlog<br>$  npm install<br></code></pre></td></tr></table></figure>



<h3 id="3-启动-hexo"><a href="#3-启动-hexo" class="headerlink" title="3. 启动 hexo"></a>3. 启动 hexo</h3><p>在本地启动 hexo 服务，下面这个命令会启动 Hexo 博客的本地服务，并将博客站点的预览地址设为 <code>http://localhost:44944</code>。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo s -p 44944<br></code></pre></td></tr></table></figure>

<p>在启动本地服务器后，可以在浏览器中输入 <code>http://localhost:44944</code> 来访问博客站点的本地预览。</p>
<h2 id="三-把博客部署到-github"><a href="#三-把博客部署到-github" class="headerlink" title="三. 把博客部署到 github"></a>三. 把博客部署到 github</h2><p>先配置好 git 环境，然后就能把博客部署到服务器了</p>
<h3 id="1-配置-git-环境"><a href="#1-配置-git-环境" class="headerlink" title="1. 配置 git 环境"></a>1. 配置 git 环境</h3><p>分“下载git”，“配置 name 和 email 信息”，“免密连接 git”和“部署hexo”几个部分描述。</p>
<h4 id="①-下载-git"><a href="#①-下载-git" class="headerlink" title="① 下载 git"></a>① 下载 git</h4><p>网上有关 git 下载的教程很多，这里列一个：<a target="_blank" rel="noopener" href="https://www.itheima.com/news/20211208/163755.html">Git安装教程：git工具安装详细步骤 (itheima.com)</a></p>
<h4 id="②-设置账户信息"><a href="#②-设置账户信息" class="headerlink" title="② 设置账户信息"></a>② 设置账户信息</h4><p>安装完 git 后需要先创建个名字和 email 地址</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global user.name <span class="hljs-string">&quot;Your Name&quot;</span><br>$ git config --global user.email <span class="hljs-string">&quot;email@example.com&quot;</span><br><br><span class="hljs-comment"># 查看已有的配置</span><br>git config --list<br>git config --global --list<br></code></pre></td></tr></table></figure>



<h4 id="③-github-保存本地的-id-rsa-pub"><a href="#③-github-保存本地的-id-rsa-pub" class="headerlink" title="③ github 保存本地的 id_rsa.pub"></a>③ github 保存本地的 id_rsa.pub</h4><p><code>id_rsa.pub</code> 文件保存在 <code>~/.ssh</code> 目录下，如果没有的话用下面的命令创建一个</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># 下面的 email 和 前面的 user.email 要匹配</span><br>$ ssh-keygen -t rsa -C <span class="hljs-string">&quot;email@example.com</span><br></code></pre></td></tr></table></figure>

<p>此时<code>./ssh</code>中会生成 <code>id_rsa</code> 和 <code>id_rsa.pub</code> 两个文件，其中<code>id_rsa</code>是私钥，<code>id_rsa.pub</code>是公钥</p>
<p>需要把 <code>id_rsa.pub</code> 的内容上传到 github 的 sshKey 里，具体操作参考 github 官方教程：<a target="_blank" rel="noopener" href="https://docs.github.com/zh/authentication/connecting-to-github-with-ssh/adding-a-new-ssh-key-to-your-github-account">新增 SSH 密钥到 GitHub 帐户 - GitHub 文档</a></p>
<h4 id="④-创建-github-项目"><a href="#④-创建-github-项目" class="headerlink" title="④ 创建 github 项目"></a>④ 创建 github 项目</h4><p>项目名称和 github 名称有关系，我的 github 用户名是 hhhynnn，则需要创建一个名为 <code>hhhynnn.github.io</code> 的项目，其他名字不行，会报错。</p>
<h4 id="⑤-更换-hexo-部署方式"><a href="#⑤-更换-hexo-部署方式" class="headerlink" title="⑤ 更换 hexo 部署方式"></a>⑤ 更换 hexo 部署方式</h4><p>分两步走，第一步是下载部署所需插件，第二步是修改 <code>_config.yml</code> 文件，定义部署方式</p>
<h5 id="step1-下载-hexo-deployer-git"><a href="#step1-下载-hexo-deployer-git" class="headerlink" title="step1. 下载 hexo-deployer-git"></a>step1. 下载 hexo-deployer-git</h5><p>这个组件非常重要，利用 git 来部署专用，不论是部署到 github 还是部署到阿里云都需要。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install hexo-deployer-git --save<br></code></pre></td></tr></table></figure>

<h5 id="step2-修改在ZenithBlog-config-yml"><a href="#step2-修改在ZenithBlog-config-yml" class="headerlink" title="step2. 修改在ZenithBlog/_config.yml"></a>step2. 修改在<code>ZenithBlog/_config.yml</code></h5><p>注意把下面的 repo 改成自己的 github 仓库地址</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">deploy:</span><br>  <span class="hljs-attr">type:</span> <span class="hljs-string">git</span><br>  <span class="hljs-attr">repo:</span> <span class="hljs-string">git@github.com:hhhynnn/hhhynnn.github.io.git</span><br>  <span class="hljs-attr">branch:</span> <span class="hljs-string">master</span><br></code></pre></td></tr></table></figure>

<h5 id="step3-设置-gitignore"><a href="#step3-设置-gitignore" class="headerlink" title="step3. 设置 .gitignore"></a>step3. 设置 .gitignore</h5><p>把博客代码 push 到 github 的时候不要包含 /public 目录</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs plaintext"># .gitignore 内容<br>public<br></code></pre></td></tr></table></figure>

<h5 id="step4-push-项目"><a href="#step4-push-项目" class="headerlink" title="step4. push 项目"></a>step4. push 项目</h5><p>把 hexo 项目 Push 到 github 上</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">$ </span><span class="language-bash">git add remote origin git@github.com:hhhynnn/hhhynnn.github.io.git</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">git push -u origin main</span><br></code></pre></td></tr></table></figure>

<h5 id="step5-查看"><a href="#step5-查看" class="headerlink" title="step5. 查看"></a>step5. 查看</h5><p>访问 <code>https://hhhynnn.github.io</code> 就能查看自己的博客，其中 <code>hhhynnn</code> 需要改成自己的 github 用户名</p>
<h4 id="③-git-配置代理的方法"><a href="#③-git-配置代理的方法" class="headerlink" title="③ git 配置代理的方法"></a>③ git 配置代理的方法</h4><p>我的代理端口是 10808，协议是 socks5，用下面的方法配置代理</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global http.proxy socks5://127.0.0.1:10808<br>$ git config --global https.proxy socks5://127.0.0.1:10808<br></code></pre></td></tr></table></figure>

<p>将来想要取消代理可以输入:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --global --<span class="hljs-built_in">unset</span> http.proxy<br>$ git config --global --<span class="hljs-built_in">unset</span> https.proxy<br></code></pre></td></tr></table></figure>

<p>想要查看 git 的 config 配置信息可以输入:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git config --system --list<br>$ git config --global  --list<br>$ git config --<span class="hljs-built_in">local</span>  --list<br></code></pre></td></tr></table></figure>



<h1 id="主题美化"><a href="#主题美化" class="headerlink" title="主题美化"></a>主题美化</h1><p>主题资源地址： <a target="_blank" rel="noopener" href="https://hexo.io/themes/">Themes</a>，东西很多，随便找，每个主题的 github 页面下都会介绍怎么配置主题，很简单。</p>
<p>下面简单介绍如何配置主题 <a target="_blank" rel="noopener" href="https://github.com/tufu9441/maupassant-hexo">maupassant-hexo</a></p>
<p>先下载主题到<code>ZenithBlog/themes/maupassant</code>目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> git@github.com:tufu9441/maupassant-hexo.git ./themes/maupassant<br></code></pre></td></tr></table></figure>

<p>按照主题作者的要求，下载必须要组件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ npm install hexo-renderer-pug --save<br>$ npm install hexo-renderer-sass --save<br></code></pre></td></tr></table></figure>

<p>修改<code>ZenithBlog/_config.yml</code>文件的<code>theme</code>值</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">theme:</span> <span class="hljs-string">maupassant</span><br></code></pre></td></tr></table></figure>

<p>清除原文件（非必需），重新生成文件，部署到远端</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ hexo clean<br>$ hexo g -d<br></code></pre></td></tr></table></figure>

<h1 id="写作指南"><a href="#写作指南" class="headerlink" title="写作指南"></a>写作指南</h1><p>记录一下插入图片、设置文章的标签和类别等操作。</p>
<h2 id="一、插入图片"><a href="#一、插入图片" class="headerlink" title="一、插入图片"></a>一、插入图片</h2><p>需要用到 <code>hexo-asset-image</code> 这个插件</p>
<h3 id="1-下载插件"><a href="#1-下载插件" class="headerlink" title="1. 下载插件"></a>1. 下载插件</h3><p>下载命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">npm install hexo-asset-image --save<br></code></pre></td></tr></table></figure>



<p>修改<code>_config.yml</code>满足，把这一项改为 true =&gt; <code>post_asset_folder: true</code></p class='item-img' data-src='/2023/03/31/tips/hexo/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/image-20230402091753656.png'><img src="/2023/03/31/tips/hexo/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/image-20230402091753656.png" alt="image-20230402091753656" style="zoom:80%;">

<p>这个组件目前有 bug（记录于 2020.05.27）</p>
<p>解决方案为将文件<code>node_modules/hexo-asset-image/index.js</code>替换为如下的内容：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-meta">&quot;use strict&quot;</span>;<br><span class="hljs-keyword">var</span> cheerio = <span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;cheerio&quot;</span>);<br><br><span class="hljs-comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getPosition</span>(<span class="hljs-params">str, m, i</span>) &#123;<br>  <span class="hljs-keyword">return</span> str.<span class="hljs-title function_">split</span>(m, i).<span class="hljs-title function_">join</span>(m).<span class="hljs-property">length</span>;<br>&#125;<br><br><span class="hljs-keyword">var</span> version = <span class="hljs-title class_">String</span>(hexo.<span class="hljs-property">version</span>).<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;.&quot;</span>);<br>hexo.<span class="hljs-property">extend</span>.<span class="hljs-property">filter</span>.<span class="hljs-title function_">register</span>(<span class="hljs-string">&quot;after_post_render&quot;</span>, <span class="hljs-keyword">function</span> (<span class="hljs-params">data</span>) &#123;<br>  <span class="hljs-keyword">var</span> config = hexo.<span class="hljs-property">config</span>;<br>  <span class="hljs-keyword">if</span> (config.<span class="hljs-property">post_asset_folder</span>) &#123;<br>    <span class="hljs-keyword">var</span> link = data.<span class="hljs-property">permalink</span>;<br>    <span class="hljs-keyword">if</span> (version.<span class="hljs-property">length</span> &gt; <span class="hljs-number">0</span> &amp;&amp; <span class="hljs-title class_">Number</span>(version[<span class="hljs-number">0</span>]) == <span class="hljs-number">3</span>)<br>      <span class="hljs-keyword">var</span> beginPos = <span class="hljs-title function_">getPosition</span>(link, <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">1</span>) + <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">else</span> <span class="hljs-keyword">var</span> beginPos = <span class="hljs-title function_">getPosition</span>(link, <span class="hljs-string">&quot;/&quot;</span>, <span class="hljs-number">3</span>) + <span class="hljs-number">1</span>;<br>    <span class="hljs-comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span><br>    <span class="hljs-keyword">var</span> endPos = link.<span class="hljs-title function_">lastIndexOf</span>(<span class="hljs-string">&quot;/&quot;</span>) + <span class="hljs-number">1</span>;<br>    link = link.<span class="hljs-title function_">substring</span>(beginPos, endPos);<br><br>    <span class="hljs-keyword">var</span> toprocess = [<span class="hljs-string">&quot;excerpt&quot;</span>, <span class="hljs-string">&quot;more&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>];<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; toprocess.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">var</span> key = toprocess[i];<br><br>      <span class="hljs-keyword">var</span> $ = cheerio.<span class="hljs-title function_">load</span>(data[key], &#123;<br>        <span class="hljs-attr">ignoreWhitespace</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">xmlMode</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">lowerCaseTags</span>: <span class="hljs-literal">false</span>,<br>        <span class="hljs-attr">decodeEntities</span>: <span class="hljs-literal">false</span>,<br>      &#125;);<br><br>      $(<span class="hljs-string">&quot;img&quot;</span>).<span class="hljs-title function_">each</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span> ($(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;src&quot;</span>)) &#123;<br>          <span class="hljs-comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span><br>          <span class="hljs-keyword">var</span> src = $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;src&quot;</span>).<span class="hljs-title function_">replace</span>(<span class="hljs-string">&quot;\\&quot;</span>, <span class="hljs-string">&quot;/&quot;</span>);<br>          <span class="hljs-keyword">if</span> (!<span class="hljs-regexp">/http[s]*.*|\/\/.*/</span>.<span class="hljs-title function_">test</span>(src) &amp;&amp; !<span class="hljs-regexp">/^\s*\//</span>.<span class="hljs-title function_">test</span>(src)) &#123;<br>            <span class="hljs-comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span><br>            <span class="hljs-comment">// In addition, to support multi-level local directory.</span><br>            <span class="hljs-keyword">var</span> linkArray = link.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">elem</span>) &#123;<br>              <span class="hljs-keyword">return</span> elem != <span class="hljs-string">&quot;&quot;</span>;<br>            &#125;);<br>            <span class="hljs-keyword">var</span> srcArray = src.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;/&quot;</span>).<span class="hljs-title function_">filter</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">elem</span>) &#123;<br>              <span class="hljs-keyword">return</span> elem != <span class="hljs-string">&quot;&quot;</span> &amp;&amp; elem != <span class="hljs-string">&quot;.&quot;</span>;<br>            &#125;);<br>            <span class="hljs-keyword">if</span> (srcArray.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1</span>) srcArray.<span class="hljs-title function_">shift</span>();<br>            src = srcArray.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;/&quot;</span>);<br>            $(<span class="hljs-variable language_">this</span>).<span class="hljs-title function_">attr</span>(<span class="hljs-string">&quot;src&quot;</span>, config.<span class="hljs-property">root</span> + link + src);<br>            <span class="hljs-variable language_">console</span>.<span class="hljs-property">info</span> &amp;&amp;<br>              <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;update link as:--&gt;&quot;</span> + config.<span class="hljs-property">root</span> + link + src);<br>          &#125;<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-property">info</span> &amp;&amp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>(<span class="hljs-string">&quot;no src attr, skipped...&quot;</span>);<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-property">info</span> &amp;&amp; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">info</span>($(<span class="hljs-variable language_">this</span>));<br>        &#125;<br>      &#125;);<br>      data[key] = $.<span class="hljs-title function_">html</span>();<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>



<h3 id="2-图片插入格式"><a href="#2-图片插入格式" class="headerlink" title="2. 图片插入格式"></a>2. 图片插入格式</h3><p>正确插入图片需要满足两个条件：</p>
<ol>
<li><p>图片保存在与 .md 同名的文件夹内；</p>
</li>
<li><p>使用相对路劲引用图片；</p>
</li>
</ol>
<p class='item-img' data-src='/2023/03/31/tips/hexo/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/image-20230402092613046.png'><img src="/2023/03/31/tips/hexo/%E6%90%AD%E5%BB%BAhexo%E5%8D%9A%E5%AE%A2/image-20230402092613046.png" alt="image-20230402092613046"></p>
<p>插入格式有两种：</p>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section"># 第一种 markdown 格式</span><br>![<span class="hljs-string">image-20230402092129468</span>](<span class="hljs-link">./搭建hexo博客/image-1.png</span>)<br><br><span class="hljs-section"># 第二种 html 格式</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;./搭建hexo博客/image-1.png&quot;</span> <span class="hljs-attr">alt</span>=<span class="hljs-string">&quot;image-1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;zoom:80%;&quot;</span> /&gt;</span></span><br></code></pre></td></tr></table></figure>

<h2 id="二、分类和标签"><a href="#二、分类和标签" class="headerlink" title="二、分类和标签"></a>二、分类和标签</h2><p>参考教程： <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/docs/front-matter">hexo 文档之 front-matter</a></p>
<h3 id="1-分类-categories"><a href="#1-分类-categories" class="headerlink" title="1. 分类 categories"></a>1. 分类 categories</h3><p>层次分类用 categories，如下面的分类表示本文章属于 Dirary-&gt;Life 类（Dirary 是父类）</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">categories:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Diary</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Life</span><br></code></pre></td></tr></table></figure>

<p>一篇文章可以同时处于多个分类模块下，每一个都要用<code>-[]</code>标记</p>
<p>举例：下面的分类表示文章属于 Diary-&gt;PlayStation，也属于 Diary-&gt;Gage，也属于 Life</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">categories:</span><br>  <span class="hljs-bullet">-</span> [<span class="hljs-string">Diary</span>, <span class="hljs-string">PlayStation</span>]<br>  <span class="hljs-bullet">-</span> [<span class="hljs-string">Diary</span>, <span class="hljs-string">Games</span>]<br>  <span class="hljs-bullet">-</span> [<span class="hljs-string">Life</span>]<br></code></pre></td></tr></table></figure>

<h3 id="2-标签-tags"><a href="#2-标签-tags" class="headerlink" title="2. 标签 tags"></a>2. 标签 tags</h3><p>标签很粗暴，直接连续写下去</p>
<p>举例：下面的分类表示文章属于 PS3 和 Games</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs yaml"><span class="hljs-attr">tags:</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">PS3</span><br>  <span class="hljs-bullet">-</span> <span class="hljs-string">Games</span><br></code></pre></td></tr></table></figure>

<h1 id="踩坑"><a href="#踩坑" class="headerlink" title="踩坑"></a>踩坑</h1><p>arknights 主题无法在服务器上正确渲染，百思不得其解目前已经尝试过方法</p>
<ol>
<li>部署到本地或github，发现都能正确渲染</li>
<li>更新服务器 node.js 版本，发现仍然不能正确渲染</li>
</ol>
<h2 id="一、nginx-已安装，但文件混乱"><a href="#一、nginx-已安装，但文件混乱" class="headerlink" title="一、nginx 已安装，但文件混乱"></a>一、nginx 已安装，但文件混乱</h2><p>强烈建议重装 nginx，下面是我硬着头皮没重装，进行的尝试：</p>
<p>网上说直接配置 nginx.conf, 使用  <code>find / -name nginx.conf</code> 命令可以找到这个文件</p>
<p>但我的 nginx 是系统自带的，这个配置文件里没有关于 80 端口的配置</p>
<p>不过在配置文件里看到了一句话 <code>include /etc/nginx/modules-enables/*.conf</code>，指出了其他配置文件目录也存在配置文件，几经转折，终于找到了有关 80 端口的配置，在 <code>/etc/nginx/sites-available/default</code> 这个文件内</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">这文件的名字甚至都不是 nginx.conf，是真的坑爹</span><br><span class="hljs-meta prompt_">$ </span><span class="language-bash">vim /etc/nginx/sites-available/default</span><br>------<br>user root;<br>...<br>server &#123;<br>    # 这两项用于定位， 一定是监听 80 端口的 server<br>    listen 80 default_server;<br>    listen [::]:80 default_server;<br><br>    # 主页文件的 usr, dir<br>    root /var/www/zenith;<br><br>    index index.html index.htm index.nginx-debian.html;<br>    server_name hyinan.com;<br>&#125;<br></code></pre></td></tr></table></figure>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div class="footer-link" style="width: 50%;text-align:right;border-right:1px #fe2 solid"><a href="/2023/04/01/tips/latex/">← Next latex</a></div><div class="footer-link" style="width: 50%;right:1px;border-left:1px #fe2 solid"><a href="/2023/03/31/tips/hexo/hexo%E9%83%A8%E7%BD%B2%E5%88%B0%E6%9C%8D%E5%8A%A1%E5%99%A8/">hexo部署到服务器 Prev →</a></div></div></div><div id="comments"><div class="selector"><button class="valine-sel"></button></div><div id="valine"></div></div></div><div class="bottom-btn"><div><a id="to-top" onClick="scrolls.scrolltop();" title="回到顶部" style="opacity: 0; display: none;">∧</a><a id="to-index" href="#toc-div" title="文章目录">≡</a><a id="color-mode" onClick="colorMode.change()" title="切换主题"></a></div></div></article><aside><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a href="/">Zenith</a></h1><div id="description"><p>风雪夜归人</p></div></div><div id="aside-block"><div id="toc-div"><h1>目录</h1><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Hello-world"><span class="toc-number">1.</span> <span class="toc-text">Hello, world</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81-hexo-%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="toc-number">1.1.</span> <span class="toc-text">一、 hexo 环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%AE%89%E8%A3%85-node-js"><span class="toc-number">1.1.1.</span> <span class="toc-text">1. 安装 node.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%AE%89%E8%A3%85-hexo"><span class="toc-number">1.1.2.</span> <span class="toc-text">2. 安装 hexo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BA%E6%9C%AC%E5%9C%B0%E5%8D%9A%E5%AE%A2"><span class="toc-number">1.2.</span> <span class="toc-text">二、创建本地博客</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%80%E4%B8%AA-hexo-%E7%9B%AE%E5%BD%95"><span class="toc-number">1.2.1.</span> <span class="toc-text">1. 初始化一个 hexo 目录</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9C%A8%E7%9B%AE%E5%BD%95%E4%B8%AD%E5%AE%89%E8%A3%85%E5%BF%85%E8%A6%81%E7%BB%84%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">2. 在目录中安装必要组件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%AF%E5%8A%A8-hexo"><span class="toc-number">1.2.3.</span> <span class="toc-text">3. 启动 hexo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E6%8A%8A%E5%8D%9A%E5%AE%A2%E9%83%A8%E7%BD%B2%E5%88%B0-github"><span class="toc-number">1.3.</span> <span class="toc-text">三. 把博客部署到 github</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%85%8D%E7%BD%AE-git-%E7%8E%AF%E5%A2%83"><span class="toc-number">1.3.1.</span> <span class="toc-text">1. 配置 git 环境</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0-%E4%B8%8B%E8%BD%BD-git"><span class="toc-number">1.3.1.1.</span> <span class="toc-text">① 下载 git</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1-%E8%AE%BE%E7%BD%AE%E8%B4%A6%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">1.3.1.2.</span> <span class="toc-text">② 设置账户信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-github-%E4%BF%9D%E5%AD%98%E6%9C%AC%E5%9C%B0%E7%9A%84-id-rsa-pub"><span class="toc-number">1.3.1.3.</span> <span class="toc-text">③ github 保存本地的 id_rsa.pub</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3-%E5%88%9B%E5%BB%BA-github-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.1.4.</span> <span class="toc-text">④ 创建 github 项目</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A4-%E6%9B%B4%E6%8D%A2-hexo-%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F"><span class="toc-number">1.3.1.5.</span> <span class="toc-text">⑤ 更换 hexo 部署方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#step1-%E4%B8%8B%E8%BD%BD-hexo-deployer-git"><span class="toc-number">1.3.1.5.1.</span> <span class="toc-text">step1. 下载 hexo-deployer-git</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#step2-%E4%BF%AE%E6%94%B9%E5%9C%A8ZenithBlog-config-yml"><span class="toc-number">1.3.1.5.2.</span> <span class="toc-text">step2. 修改在ZenithBlog&#x2F;_config.yml</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#step3-%E8%AE%BE%E7%BD%AE-gitignore"><span class="toc-number">1.3.1.5.3.</span> <span class="toc-text">step3. 设置 .gitignore</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#step4-push-%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.3.1.5.4.</span> <span class="toc-text">step4. push 项目</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#step5-%E6%9F%A5%E7%9C%8B"><span class="toc-number">1.3.1.5.5.</span> <span class="toc-text">step5. 查看</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2-git-%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.3.1.6.</span> <span class="toc-text">③ git 配置代理的方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BB%E9%A2%98%E7%BE%8E%E5%8C%96"><span class="toc-number">2.</span> <span class="toc-text">主题美化</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%86%99%E4%BD%9C%E6%8C%87%E5%8D%97"><span class="toc-number">3.</span> <span class="toc-text">写作指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E6%8F%92%E5%85%A5%E5%9B%BE%E7%89%87"><span class="toc-number">3.1.</span> <span class="toc-text">一、插入图片</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E4%B8%8B%E8%BD%BD%E6%8F%92%E4%BB%B6"><span class="toc-number">3.1.1.</span> <span class="toc-text">1. 下载插件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%9B%BE%E7%89%87%E6%8F%92%E5%85%A5%E6%A0%BC%E5%BC%8F"><span class="toc-number">3.1.2.</span> <span class="toc-text">2. 图片插入格式</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%86%E7%B1%BB%E5%92%8C%E6%A0%87%E7%AD%BE"><span class="toc-number">3.2.</span> <span class="toc-text">二、分类和标签</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%88%86%E7%B1%BB-categories"><span class="toc-number">3.2.1.</span> <span class="toc-text">1. 分类 categories</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%A0%87%E7%AD%BE-tags"><span class="toc-number">3.2.2.</span> <span class="toc-text">2. 标签 tags</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B8%A9%E5%9D%91"><span class="toc-number">4.</span> <span class="toc-text">踩坑</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81nginx-%E5%B7%B2%E5%AE%89%E8%A3%85%EF%BC%8C%E4%BD%86%E6%96%87%E4%BB%B6%E6%B7%B7%E4%B9%B1"><span class="toc-number">4.1.</span> <span class="toc-text">一、nginx 已安装，但文件混乱</span></a></li></ol></li></ol></div></div><footer><nobr>构建自 <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> 使用主题 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknights</a></nobr><wbr><nobr>主题作者 <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><script src="/js/search.js"></script><script src="/js/arknights.js"></script><script src="//unpkg.com/lightgallery@2.7.1/lightgallery.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/zoom/lg-zoom.min.js"></script><script src="//unpkg.com/lightgallery@2.7.1/plugins/thumbnail/lg-thumbnail.min.js"></script><script src="/js/pjax.js"></script><script class="pjax-js">reset= () => {new Valine({
 el: '#valine'
 , appId: 'qSBWEWJW9wsbLiL0rFTjUHbl-gzGzoHsz'
 , appKey: '0yF0ErNCNXzYHEyzxzYspMXE' , placeholder: '此条评论委托企鹅物流发送'
 , path: window.location.pathname
});code.findCode();
document.querySelector('.lg-container')?.remove()
lightGallery(document.getElementById('post-bg'), {
  plugins: [lgZoom,lgThumbnail],
  selector: '.item-img'})}</script><script>window.addEventListener("load",() => {pjax = new Pjax({
 cacheBust: false,
 selectors: ['title','article','#aside-block','.pjax-js'],
 switches: {'article': Pjax.switches.sideBySide},
 switchesOptions: {
   'article': {
     classNames: {
       remove: "pjax-out",
       add: "pjax-in"
     }
   }
 }
});
document.addEventListener("pjax:complete", reset);reset()})</script></body></html>